# 内部仕様書

## 1. 概要

本ドキュメントは、Pythonで作成されたテトリス風ゲーム「PythonGame」の内部仕様を記述するものです。

## 2. プロジェクト構成

```
/
├── src/                # ソースコード
│   ├── pythongame/     # Pythonパッケージ
│   │   ├── __init__.py
│   │   ├── main.py     # エントリーポイント
│   │   ├── game.py     # Gameクラス
│   │   ├── board.py    # Boardクラス
│   │   ├── block.py    # Blockクラス
│   │   ├── constants.py # 定数
│   │   └── assets.py   # アセット管理
│   ├── assets/
│   │   ├── images/     # 画像ファイル
│   │   └── sounds/     # 音声ファイル
│   └── pyproject.toml  # プロジェクト設定
├── docs/               # ドキュメント
│   ├── 内部仕様書.md
│   └── ユーザーズガイド.md
└── README.md           # プロジェクト概要
```

## 3. モジュール詳細

### 3.1. `main.py`

- **役割**: ゲームの起動（エントリーポイント）
- **機能**: `Game` クラスのインスタンスを生成し、ゲームループを開始する。

### 3.2. `game.py`

- **クラス**: `Game`
- **役割**: ゲーム全体の制御
- **機能**:
    - Pygameの初期化、ウィンドウ作成
    - `Board`, `Block`, `Assets` のインスタンス管理
    - メインループの実行
    - ユーザー入力の処理 (キーイベント)
    - ゲーム状態の更新（ブロックの落下、固定、ゲームオーバー判定）
    - 画面描画
    - 音声再生

### 3.3. `board.py`

- **クラス**: `Board`
- **役割**: ゲームボードの管理
- **機能**:
    - ゲームボードの状態を保持するグリッドの管理
    - 固定されたブロックの描画
    - ブロックの移動・回転が有効かの判定
    - ブロックの固定
    - ラインが揃った際の消去処理とスコア計算

### 3.4. `block.py`

- **クラス**: `Block`
- **役割**: テトリミノ（ブロック）の管理
- **機能**:
    - ブロックの形状、色（キー）、位置、回転状態の保持
    - ブロックの回転処理

### 3.5. `constants.py`

- **役割**: 定数の定義
- **内容**: 画面サイズ、グリッドサイズ、色、テトリミノの形状と色など、ゲーム全体で使用するマジックナンバーを定数として定義する。

### 3.6. `assets.py`

- **クラス**: `Assets`
- **役割**: 画像・音声アセットの管理
- **機能**:
    - `assets` フォルダから画像と音声ファイルを読み込み、保持する。
    - 音声再生のインターフェースを提供。

